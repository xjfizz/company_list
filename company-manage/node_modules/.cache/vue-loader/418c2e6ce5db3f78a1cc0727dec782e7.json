{"remainingRequest":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_vue-loader@15.8.3@vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\后台模板\\新建文件夹\\company-manage\\src\\components\\page\\news.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\src\\components\\page\\news.vue","mtime":1579398479944},{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_css-loader@1.0.1@css-loader\\index.js","mtime":499162500000},{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_vue-loader@15.8.3@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\后台模板\\新建文件夹\\company-manage\\node_modules\\_vue-loader@15.8.3@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.message-title {\n    cursor: pointer;\n}\n.handle-row {\n    margin-top: 30px;\n}\n.handle-box {\n    margin-bottom: 20px;\n}\n.mr10 {\n    margin-right: 10px;\n}\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.add-sty {\n    float: right;\n    margin-right: 50px;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n}\n",{"version":3,"sources":["news.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"news.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div class=\"\">\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item><i class=\"el-icon-lx-copy\"></i> 新闻动态</el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"handle-box\">\n                <el-select clearable v-model=\"searchKey\" placeholder=\"请选择公司名\" class=\"mr10\">\n                    <el-option v-for=\"item in companyList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"> </el-option>\n                    <!-- <el-option key=\"2\" label=\"湖南省\" value=\"湖南省\"></el-option> -->\n                </el-select>\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">搜索</el-button>\n                <el-button class=\"add-sty\" type=\"primary\" icon=\"el-icon-plus\" @click=\"add()\">增加</el-button>\n            </div>\n\n            <el-table\n                :data=\"tableData\"\n                border\n                class=\"table\"\n                ref=\"multipleTable\"\n                header-cell-class-name=\"table-header\"\n                @selection-change=\"handleSelectionChange\"\n            >\n                <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"id\" label=\"ID\" width=\"100\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"state\" label=\"公司名\">\n                    <template slot-scope=\"scope\">\n                        <el-tag type=\"success\" v-if=\"scope.row.state == 1\">江苏二四优递生活服务有限公司</el-tag>\n                        <el-tag type=\"warning\" v-else-if=\"scope.row.state == 2\">江苏玥珮物流有限公司</el-tag>\n                        <el-tag type=\"info\" v-else-if=\"scope.row.state == 3\">江苏蜗活电子商务有限公司</el-tag>\n                        <el-tag type=\"danger\" v-else-if=\"scope.row.state == 4\">上海简适物业服务有限公司</el-tag>\n                        <el-tag v-else-if=\"scope.row.state == 5\">江苏华软智能信息科技有限公司</el-tag>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n                <el-table-column prop=\"content\" label=\"内容\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"time\" label=\"日期\" align=\"center\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"180\" align=\"center\">\n                    <template slot-scope=\"scope\">\n                        <el-button type=\"text\" icon=\"el-icon-edit\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                        <el-button type=\"text\" icon=\"el-icon-delete\" class=\"red\" @click=\"handleDelete(scope.$index, scope.row)\"\n                            >删除</el-button\n                        >\n                    </template>\n                </el-table-column>\n            </el-table>\n\n            <div class=\"pagination\">\n                <el-pagination\n                    background\n                    layout=\"total, prev, pager, next\"\n                    :current-page=\"page.currentPage\"\n                    :page-size=\"page.pageSize\"\n                    :total=\"page.total\"\n                    @current-change=\"handlePageChange\"\n                ></el-pagination>\n            </div>\n\n            <!--  增加 -->\n            <el-dialog title=\"增加\" :visible.sync=\"addVisible\" width=\"30%\">\n                <el-form ref=\"form\" :model=\"formAdd\" label-width=\"70px\">\n                    <el-form-item label=\"公司\">\n                        <el-select v-model=\"formAdd.state\" placeholder=\"请选择\">\n                            <el-option v-for=\"item in companyList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"> </el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"标题\">\n                        <el-input v-model=\"formAdd.title\" placeholder=\"请输入标题\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"内容\">\n                        <el-input type=\"textarea\" :rows=\"2\" v-model=\"formAdd.content\" placeholder=\"请输入内容\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"日期\">\n                        <el-date-picker\n                            v-model=\"formAdd.time\"\n                            type=\"date\"\n                            placeholder=\"选择日期\"\n                            format=\"yyyy 年 MM 月 dd 日\"\n                            value-format=\"yyyy-MM-dd\"\n                        >\n                        </el-date-picker>\n                    </el-form-item>\n                </el-form>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"addVisible = false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"saveAdd\">确 定</el-button>\n                </span>\n            </el-dialog>\n\n            <!--  编辑 -->\n            <el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\">\n                <el-form ref=\"form\" :model=\"formEdit\" label-width=\"70px\">\n                    <el-form-item label=\"公司\">\n                        <el-select v-model=\"formEdit.state\" placeholder=\"请选择\">\n                            <el-option v-for=\"item in companyList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"> </el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"标题\">\n                        <el-input v-model=\"formEdit.title\" placeholder=\"请输入标题\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"内容\">\n                        <el-input type=\"textarea\" :rows=\"2\" v-model=\"formEdit.content\" placeholder=\"请输入内容\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"日期\">\n                        <el-date-picker\n                            v-model=\"formEdit.time\"\n                            type=\"date\"\n                            placeholder=\"选择日期\"\n                            format=\"yyyy 年 MM 月 dd 日\"\n                            value-format=\"yyyy-MM-dd\"\n                        >\n                        </el-date-picker>\n                    </el-form-item>\n                </el-form>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"editVisible = false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\n                </span>\n            </el-dialog>\n        </div>\n    </div>\n</template>\n\n<script>\nimport API from '@/api';\nexport default {\n    name: 'news',\n    data() {\n        return {\n            searchKey: '',\n            tableData: [],\n            page: {\n                currentPage: 1,\n                pageSize: 10,\n                total: 0\n            },\n            companyList: [\n                {\n                    value: 5,\n                    label: '江苏华软智能信息科技有限公司'\n                },\n                {\n                    value: 1,\n                    label: '江苏二四优递生活服务有限公司'\n                },\n                {\n                    value: 2,\n                    label: '江苏玥珮物流有限公司'\n                },\n                {\n                    value: 3,\n                    label: '江苏蜗活电子商务有限公司'\n                },\n                {\n                    value: 4,\n                    label: '上海简适物业服务有限公司'\n                }\n            ],\n            addVisible: false,\n            editVisible: false,\n            formAdd: {},\n            formEdit: {}\n        };\n    },\n    mounted() {\n        this.init();\n    },\n    methods: {\n        init() {\n            this.getList();\n        },\n        getList() {\n            let params = {\n                page: this.page.currentPage - 1,\n                state: this.searchKey\n            };\n            API.getNewsList(params).then(res => {\n                if (res.code == 200) {\n                    console.log('getList', res);\n                    this.tableData = res.data.rows;\n                    this.page.total = res.data.total;\n                }\n            });\n        },\n        handleSearch() {\n            this.page.currentPage = 1;\n            this.getList();\n        },\n        add() {\n            this.addVisible = true;\n        },\n        handleEdit(index, row) {\n            this.formEdit = JSON.parse(JSON.stringify(row));\n            this.editVisible = true;\n        },\n        handleDelete(index, row) {\n            // 二次确认删除\n            this.$confirm('确定要删除吗？', '提示', {\n                type: 'warning'\n            })\n                .then(() => {\n                    this.del(row.id);\n                })\n                .catch(() => {});\n        },\n        del(id) {\n            let params = [id];\n\n            API.delNews(params).then(res => {\n                if (res.code == 200) {\n                    this.$message.success('删除成功');\n                    this.page.currentPage = 1;\n                    this.getList();\n                }\n            });\n        },\n        handleSelectionChange() {},\n        handlePageChange() {},\n        saveAdd() {\n            let params = {\n                state: this.formAdd.state,\n                title: this.formAdd.title,\n                content: this.formAdd.content,\n                time: this.formAdd.time\n            };\n            API.addNews(params).then(res => {\n                console.log(res);\n                if (res.code == 200) {\n                    this.$message.success('操作成功');\n                    this.formAdd = {};\n                    this.addVisible = false;\n                    this.page.currentPage = 1;\n                    this.getList();\n                }\n            });\n        },\n        saveEdit() {\n            let params = {\n                id: this.formEdit.id,\n                state: this.formEdit.state,\n                title: this.formEdit.title,\n                content: this.formEdit.content,\n                time: this.formEdit.time\n            };\n            API.editNews(params).then(res => {\n                console.log(res);\n                if (res.code == 200) {\n                    this.$message.success('操作成功');\n                    this.formEdit = {};\n                    this.editVisible = false;\n                    this.page.currentPage = 1;\n                    this.getList();\n                }\n            });\n        }\n    },\n    computed: {}\n};\n</script>\n\n<style>\n.message-title {\n    cursor: pointer;\n}\n.handle-row {\n    margin-top: 30px;\n}\n.handle-box {\n    margin-bottom: 20px;\n}\n.mr10 {\n    margin-right: 10px;\n}\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.add-sty {\n    float: right;\n    margin-right: 50px;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n}\n</style>\n"]}]}