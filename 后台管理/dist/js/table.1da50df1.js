(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"034a":function(t,e,a){"use strict";var l=a("7f9c"),i=a.n(l);i.a},"7f9c":function(t,e,a){},da65:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 轮播图管理 ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"mr10",attrs:{clearable:"",placeholder:"请选择公司名"},model:{value:t.searchState,callback:function(e){t.searchState=e},expression:"searchState"}},t._l(t.companyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")]),a("el-button",{staticClass:"add-sty",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addImg()}}},[t._v("增加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"state",label:"公司名"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("el-tag",{attrs:{type:"success"}},[t._v("江苏二四优递生活服务有限公司")]):2==e.row.state?a("el-tag",{attrs:{type:"warning"}},[t._v("江苏玥珮物流有限公司")]):3==e.row.state?a("el-tag",{attrs:{type:"info"}},[t._v("江苏蜗活电子商务有限公司")]):4==e.row.state?a("el-tag",{attrs:{type:"danger"}},[t._v("上海简适物业服务有限公司")]):5==e.row.state?a("el-tag",[t._v("江苏华软智能信息科技有限公司")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{label:"轮播图",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticClass:"table-td-thumb",attrs:{src:t.row.img,"preview-src-list":[t.row.img]}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.currentPage,"page-size":t.page.pageSize,total:t.page.total},on:{"current-change":t.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"公司"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.companyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"轮播图"}},[a("el-upload",{attrs:{action:"action","file-list":t.fileListEdit,"auto-upload":!1,"list-type":"picture-card",limit:1,"on-change":t.uploadChange}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"增加",visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formAdd,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"公司"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formAdd.state,callback:function(e){t.$set(t.formAdd,"state",e)},expression:"formAdd.state"}},t._l(t.companyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.formAdd.content,callback:function(e){t.$set(t.formAdd,"content",e)},expression:"formAdd.content"}})],1),a("el-form-item",{attrs:{label:"轮播图"}},[a("el-upload",{attrs:{action:"action","file-list":t.fileListEdit,"auto-upload":!1,"list-type":"picture-card",limit:1,"on-change":t.uploadChange}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1)],1)],1)},i=[],s=(a("cc57"),a("365c")),n={name:"banner",data:function(){return{query:{address:"",name:"",pageIndex:1,pageSize:10},page:{pageSize:10,currentPage:1,total:0},tableData:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,pageTotal:0,form:{},formAdd:{state:1},searchState:"",idx:-1,id:-1,imageUrl:"",fileListEdit:[],companyList:[{value:5,label:"江苏华软智能信息科技有限公司"},{value:1,label:"江苏二四优递生活服务有限公司"},{value:2,label:"江苏玥珮物流有限公司"},{value:3,label:"江苏蜗活电子商务有限公司"},{value:4,label:"上海简适物业服务有限公司"}],imgChange:!1}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={state:this.searchState,page:this.page.currentPage-1,limit:this.page.pageSize};s["a"].getlunboList(e).then((function(e){200==e.code&&(t.tableData=e.data.rows,t.page.total=e.data.total)}))},handleSearch:function(){this.getData()},handleDelete:function(t,e){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.delImg(e.id)})).catch((function(){}))},handleSelectionChange:function(t){this.multipleSelection=t},delAllSelection:function(){var t=this.multipleSelection.length,e="";this.delList=this.delList.concat(this.multipleSelection);for(var a=0;a<t;a++)e+=this.multipleSelection[a].name+" ";this.$message.error("删除了".concat(e)),this.multipleSelection=[]},handleEdit:function(t,e){this.idx=t,this.form=JSON.parse(JSON.stringify(e)),this.fileListEdit=[{url:this.form.img}],this.editVisible=!0},addImg:function(){this.addVisible=!0,this.formAdd={},this.fileListEdit=[]},saveEdit:function(){this.imgChange?this.uploadImg():(this.imageUrl=this.form.img,this.formSubmitEdit())},delImg:function(t){var e=this,a=[t];s["a"].delImg(a).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.page.currentPage=1,e.getData())}))},saveAdd:function(){this.uploadImgAdd()},handlePageChange:function(t){this.page.currentPage=t,this.getData()},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},uploadChange:function(t,e){console.log(t,e),this.imageUrl=t.raw,this.imgChange=!0},uploadImg:function(){var t=this,e=new FormData;e.append("id",this.form.id),e.append("file",this.imageUrl),s["a"].fileUpLoad(e).then((function(e){console.log(e),200==e.code?(t.$message.success({type:"warn",message:e.message}),t.editVisible=!1,t.imageUrl=e.data,t.formSubmitEdit()):t.$message.warning({type:"warn",message:e.message})}))},uploadImgAdd:function(){var t=this,e=new FormData;e.append("id",this.formAdd.state),e.append("file",this.imageUrl),s["a"].fileUpLoad(e).then((function(e){console.log(e),200==e.code?(t.$message.success({type:"warn",message:e.message}),t.addVisible=!1,t.imageUrl=e.data,t.formSubmitAdd()):t.$message.warning({type:"warn",message:e.message})}))},formSubmitAdd:function(){var t=this,e={img:this.imageUrl,state:this.formAdd.state,content:this.formAdd.content,title:this.formAdd.title};s["a"].addlunboList(e).then((function(e){console.log(e),200==e.code&&(t.formAdd={state:1},t.page.currentPage=1,t.getData())}))},formSubmitEdit:function(){var t=this,e={id:this.form.id,img:this.imageUrl,state:this.form.state,content:this.form.content,title:this.form.title};s["a"].upDatalunboList(e).then((function(e){console.log(e),200==e.code&&(t.form={state:1},t.editVisible=!1,t.imgChange=!1,t.page.currentPage=1,t.getData())}))}}},o=n,r=(a("034a"),a("5511")),c=Object(r["a"])(o,l,i,!1,null,"257adb60",null);e["default"]=c.exports}}]);
//# sourceMappingURL=table.1da50df1.js.map